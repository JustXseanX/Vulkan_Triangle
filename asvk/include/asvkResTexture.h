//-------------------------------------------------------------------------------------------------
// File : asvkResTexture.h
// Desc : Resource Texture Module.
// Copyright(c) Project Asura. All right reserved.
//-------------------------------------------------------------------------------------------------
#pragma once

//-------------------------------------------------------------------------------------------------
// Includes
//-------------------------------------------------------------------------------------------------
#include <asvkTypedef.h>


namespace asvk {

///////////////////////////////////////////////////////////////////////////////////////////////////
// RESTEXTURE_DIMENSION enum
///////////////////////////////////////////////////////////////////////////////////////////////////
enum RESTEXTURE_DIMENSION
{
    RESTEXTURE_DIMENSION_UNKNOWN,
    RESTEXTURE_DIMENSION_1D,
    RESTEXTURE_DIMENSION_2D,
    RESTEXTURE_DIMENSION_3D,
    RESTEXTURE_DIMENSION_CUBE,
};


///////////////////////////////////////////////////////////////////////////////////////////////////
// Surface structure
///////////////////////////////////////////////////////////////////////////////////////////////////
struct Surface
{
    uint32_t     Width;          //!< 横幅です.
    uint32_t     Height;         //!< 縦幅です.
    uint32_t     RowPitch;       //!< 1行あたりのデータサイズ(byte)です.
    uint32_t     SlicePitch;     //!< 1スライスあたりのデータサイズ(byte)です.
    uint8_t*     pPixels;        //!< ピクセルデータです.

    //---------------------------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //---------------------------------------------------------------------------------------------
    Surface()
    : Width     ( 0 )
    , Height    ( 0 )
    , RowPitch  ( 0 )
    , SlicePitch( 0 )
    , pPixels   ( nullptr )
    { /* DO_NOTHING */ }
};


///////////////////////////////////////////////////////////////////////////////////////////////////
// ResTexture structure
///////////////////////////////////////////////////////////////////////////////////////////////////
struct ResTexture
{
    RESTEXTURE_DIMENSION    Dimension;          //!< 次元数です.
    uint32_t                Width;              //!< 横幅です.
    uint32_t                Height;             //!< 縦幅です.
    uint32_t                DepthOrArraySize;   //!< 奥行 or 配列サイズ (キューブマップの場合は DepthOrArarySize / 6 で数を算出してください).
    uint32_t                MipLevels;          //!< ミップレベル
    uint32_t                Format;             //!< フォーマットです.
    Surface*                pSurfaces;          //!< サーフェイスデータです.

    //---------------------------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //---------------------------------------------------------------------------------------------
    ResTexture()
    : Dimension         ( RESTEXTURE_DIMENSION_UNKNOWN )
    , Width             ( 0 )
    , Height            ( 0 )
    , DepthOrArraySize  ( 0 )
    , MipLevels         ( 0 )
    , Format            ( 0 )
    , pSurfaces         ( nullptr )
    { /* DO_NOTHING */ }
};


///////////////////////////////////////////////////////////////////////////////////////////////////
// TextureFactory class
///////////////////////////////////////////////////////////////////////////////////////////////////
class TextureFactory
{
    //=============================================================================================
    // list of friend classes and methods.
    //=============================================================================================
    /* NOTHING */

public:
    //=============================================================================================
    // public variables.
    //=============================================================================================
    /* NOTHING */

    //=============================================================================================
    // public methods.
    //=============================================================================================

    //---------------------------------------------------------------------------------------------
    //! @brief      テクスチャリソースを生成します.
    //!
    //! @param[in]      filename        テクスチャファイル名です.
    //! @param[out]     pResult         テクスチャリソースの格納先です.
    //---------------------------------------------------------------------------------------------
    static bool Create( const wchar_t* filename, ResTexture* pResult );

    //---------------------------------------------------------------------------------------------
    //! @brief      テクスチャリソースを破棄します.
    //!
    //! @param[in]      value         破棄するテクスチャリソースへの参照.
    //---------------------------------------------------------------------------------------------
    static void Dispose( ResTexture& value );
};


} // namespace asvk
